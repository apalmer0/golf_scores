class Golfer < ApplicationRecord
  validates :name, presence: true, uniqueness: true

  def self.to_csv
    attributes = %w{
      name
      salary
      odds
      driving_accuracy_2020
      driving_accuracy_2019
      driving_distance_2020
      driving_distance_2019
      approach_100_fw_2020
      approach_100_fw_2019
      approach_50_75_fw_2020
      approach_50_75_fw_2019
      approach_75_100_fw_2020
      approach_75_100_fw_2019
      approach_100_125_fw_2020
      approach_100_125_fw_2019
      approach_125_150_fw_2020
      approach_125_150_fw_2019
      approach_150_175_fw_2020
      approach_150_175_fw_2019
      approach_175_200_fw_2020
      approach_175_200_fw_2019
      approach_200_225_fw_2020
      approach_200_225_fw_2019
      approach_225_250_fw_2020
      approach_225_250_fw_2019
      approach_250_275_fw_2020
      approach_250_275_fw_2019
      approach_275_fw_2020
      approach_275_fw_2019
      approach_100_rgh_2020
      approach_100_rgh_2019
      approach_75_100_rgh_2020
      approach_75_100_rgh_2019
      approach_100_125_rgh_2020
      approach_100_125_rgh_2019
      approach_125_150_rgh_2020
      approach_125_150_rgh_2019
      approach_150_175_rgh_2020
      approach_150_175_rgh_2019
      approach_175_200_rgh_2020
      approach_175_200_rgh_2019
      approach_200_225_rgh_2020
      approach_200_225_rgh_2019
      approach_225_250_rgh_2020
      approach_225_250_rgh_2019
      approach_250_275_rgh_2020
      approach_250_275_rgh_2019
      approach_275_rgh_2020
      approach_275_rgh_2019
      gir_100_2020
      gir_100_2019
      gir_75_100_2020
      gir_75_100_2019
      gir_100_125_2020
      gir_100_125_2019
      gir_125_150_2020
      gir_125_150_2019
      gir_150_175_2020
      gir_150_175_2019
      gir_175_200_2020
      gir_175_200_2019
      gir_200_2020
      gir_200_2019
      putting_3_2020
      putting_3_2019
      putting_4_2020
      putting_4_2019
      putting_5_2020
      putting_5_2019
      putting_6_2020
      putting_6_2019
      putting_7_2020
      putting_7_2019
      putting_8_2020
      putting_8_2019
      putting_9_2020
      putting_9_2019
      putting_10_2020
      putting_10_2019
      putting_10_15_2020
      putting_10_15_2019
      putting_15_20_2020
      putting_15_20_2019
      putting_20_25_2020
      putting_20_25_2019
      putting_25_2020
      putting_25_2019
      scrambling_2020
      scrambling_2019
      scrambling_10_2020
      scrambling_10_2019
      scrambling_10_20_2020
      scrambling_10_20_2019
      scrambling_20_30_2020
      scrambling_20_30_2019
      scrambling_30_2020
      scrambling_30_2019
      scrambling_rough_2020
      scrambling_rough_2019
      scrambling_sand_2020
      scrambling_sand_2019
      scrambling_other_2020
      scrambling_other_2019
      scrambling_fringe_2020
      scrambling_fringe_2019
      avoid_3_putt_5_2020
      avoid_3_putt_5_2019
      avoid_3_putt_5_10_2020
      avoid_3_putt_5_10_2019
      avoid_3_putt_10_15_2020
      avoid_3_putt_10_15_2019
      avoid_3_putt_15_20_2020
      avoid_3_putt_15_20_2019
      avoid_3_putt_20_25_2020
      avoid_3_putt_20_25_2019
      avoid_3_putt_25_2020
      avoid_3_putt_25_2019
      cuts
    }

    CSV.generate(headers: true) do |csv|
      csv << attributes

      all.each do |user|
        csv << attributes.map{ |attr| user.send(attr) }
      end
    end
  end
end
